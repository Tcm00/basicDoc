# ALP-MI-基本报表配置流程

### 1.连接数据库

连接某个数据库作为数据源，可以访问该库的数据。

```
数据管理-》数据源配置
```

![image-20230201145009693](.\img\image-20230201145009693.png)

```
新增-》填入数据库账号、密码
```

![image-20230201144724750](.\img\image-20230201144724750.png)



### 2.基础MI报表

###### 1.数据管理-》数据集配置-》新增

![image-20230201145729694](.\img\image-20230201145729694.png)

###### 2.点击配置-》选择数据源、类型

![image-20230201150029741](.\img\image-20230201150029741.png)

###### 3.选择SQL语句-》粘贴写好的SQL语句-》点击保存  注：这里不需要查询条件

![image-20230201150538470](.\img\image-20230201150538470.png)

###### 4.点击生成字段-》引入SQL查询的结果集-》点击预览

![image-20230201150943920](.\img\image-20230201150943920.png)

###### 5.预览-》看到SQL的结果集

![image-20230201150909610](.\img\image-20230201150909610.png)

###### 6.报表配置-》自由报表定义-》测试-》新建 注：这里的报表一会发布了进行部署

![image-20230201151158063](.\img\image-20230201151158063.png)

###### 7.点击配置-》新增的时候也会自动跳转进去-》导入前面配置的字段

![image-20230201151500563](.\img\image-20230201151500563.png)

###### 8.选择数据源、数据集-》点击手势图标

![image-20230201151731549](.\img\image-20230201151731549.png)

###### 9.在首行输入列名，将生产的字段拖拽到下面一行-》其余表格的框线、加粗等和Excel操作相同

![image-20230201152645673](.\img\image-20230201152645673.png)

###### 10.选中序号-》属性-》左父格-》-》上父格-》表达式—》输入表达式-》点空白处-》点保存-》预览  注:mi的能加空格的地方都加上空格，公式跟Excel一样

![image-20230201164731554](.\img\image-20230201164731554.png)

###### 11.切忌，这里需要设置B2的左父格为无

![image-20230201220300872](.\img\image-20230201220300872.png)

###### 12.鼠标点到其他地方-》点击保存  注：mi中所有能点保存的地方操作后都建议点下保存

![image-20230201153337939](.\img\image-20230201153337939.png)

###### 13.切换到数据集-》右键-》编辑

![image-20230201153429030](.\img\image-20230201153429030.png)

###### 14.粘入写好的SQL-》修改参数

![image-20230201154318834](.\img\image-20230201154318834.png)

###### 15.修改参数-》添加参数-》点击预览-》有数据则是对的-》点击确定  注：这里的名字相互绑定；参数选择正确的格式；时间格式需要设置默认值才能预览。

![image-20230201160123318](.\img\image-20230201160123318.png)

###### 16.此时不需要点保存-》点这里添加页面上的参数

![image-20230201160254251](.\img\image-20230201160254251.png)

###### 17.先拖一个四列布局-》再拖入对应的组件

![image-20230201162048331](.\img\image-20230201162048331.png)

###### 18.点击文字-》只能是文字-》属性-》输入刚才的参数-》自定义标题-》再点一下其他空白处

![image-20230201162237175](.\img\image-20230201162237175.png)

###### 19.设置时间-》时间一般需要默认值-》“-1”表示前一个月-》设置时间格式-》点一下其他空白处

![image-20230201162509735](.\img\image-20230201162509735.png)

###### 20.搜索-》按钮风格-》这个可以变颜色-》点一下空白处

![image-20230201162636542](.\img\image-20230201162636542.png)

###### 21.这里引用一张新的SQL，前面操作不变，原因：前面操作的数据库是MySQL，like N'%'+ :name +'%'无果，以下为SqlServer数据库。  注：添加参数时选择对应的数据类型，时间类型需要赋默认值

![image-20230201213845523](.\img\image-20230201213845523.png)

###### 22.依然点击保存-》点击预览

![image-20230201221334252](.\img\image-20230201221334252.png)

###### 23.报表配置完成-》返回报表定义-》发布报表

![image-20230201221519984](.\img\image-20230201221519984.png)

###### 24.此处路径根据自己的规划选定  注：发布后报表需要设置 免登陆

![image-20230201222728536](.\img\image-20230201222728536.png)

###### 25.发布成功-》系统管理-》资源配置-》预览报表-》自由表-》修改

![image-20230201222919664](.\img\image-20230201222919664.png)

###### 26.选择免登陆-》这里的URL就是预览的地址

![image-20230201223040288](.\img\image-20230201223040288.png)

###### 27.报表配置-》自由报表定义-》预览-》复制地址

![image-20230201223521000](.\img\image-20230201223521000.png)

###### 28.在MES上发布报表-》设置外链-》粘贴链接-》用户管理-》对应的用户管理-》修改-》打勾-》开放权限

### 3.其他注意

###### 1.调整行距；直接拖动再保存；调整日期、数字格式；保存后不需要重新配置即生效；  注：#.## 和#.00 用作数字

![image-20230201230424193](.\img\image-20230201230424193.png)

